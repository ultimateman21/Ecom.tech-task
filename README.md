# Ecom.tech-task
Тестовое задание для стажировки в Ecom.tech

Программа представляет собой простейший ETL на основе контейнеризации. В качестве S3-совместимого хранилища используется MinIO. Программа написана на Python, данные обрабатываются и преобразуются в формат .parquet с использованием pyarrow и pandas.

Проект содержит три контейнера: один для MinIO, второй - для Python и третий - для автоматического создания bucket'ов в MinIO.
В папке etl находятся .py-скрипты, в папке data - тестовые данные, там же сохраняется результат работы в файле top_stores.parquet.

Скрипт generator.py создаёт случайные данные по заданному семени генерации. По умолчанию семя равно 42, с этим же семенем были сгенерированы тестовые данные. Семя генерации можно задать произвольно при запуске программы. Такие параметры генерации, как количество строк в датасетах, диапазон объёма заказа, диапазон дат, города, состояния заказов и их соотношения, задаются непосредственно в самом скрипте.

Скрипт upload_exist.py считывает из папки data файлы orders.parquet, stores.parquet, users.parquet и загружает их в MinIO.

Скрипт view.py считывает результат из MinIO, выводит его в консоль и сохраняет в файл top_stores.parquet в папку data.

Скрипт process.py считывает данные из MinIO, обрабатывает их в соответствии с требованиями задания и отправляет результат обратно в MinIO.

Скрипт app.py представляет собой консольный пользовательский интерфейс.

Папки data и etl примонтированы к контейнеру, поэтому можно изменять скрипты и датасеты без перезапуска контейнеров. MinIO имеет собственный Web UI, и, поскольку всё работает локально, к нему можно подключиться по следующему адресу:

http://localhost:9001 
login: minio
pass: 00000000

Для запуска приложения нужно перейти в директорию app и вызвать команду

docker compose up

после завершения запуска всех контейнеров нужно запустить скрипт app.py следующей командой

docker exec -it etl-python python etl/app.py
