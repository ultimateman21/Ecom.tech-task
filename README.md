# Ecom.tech-task
Тестовое задание для стажировки в Ecom.tech

Программа представляет собой простейший ETL на основе контейнеризации. В качестве S3-совместимого хранилища используется Minio, программа написана на Python, данные обрабатываются и преобразуются в .parquet, используя pyarrow, с помощью Pandas.
Содержит 3 контейнера: один для Minio, второй для Python и третий для автоматического создания buckets в Minio.
В папке etl находятся .py скрипты, в папке data находятся тестовые данные и там же находится результат работы в файле top_stores.parquet.

Скрипт generator.py создаёт случайные данные по семени генерации, по умолчанию семя равно 42, с этим же семенем сгенерированы тестовые данные. Семя генерации можно задать любое при работе программы, параметры генерации такие как число строк в датасетах, промежуток объёма заказа, промежуток дат, города, состояния заказов и их соотношения в генерации можно задать непосредственно в самом скрипте.
Скрипт upload_exist.py считывает из папки data содержимое файлов orders.parquet, stores.parquet, users.parquet и загружает их в Minio.
Скрипт view.py считывает результат из Minio, вывадит его в консоль и сохраняет в файл top_stores.parquet в папку data.
Скрипт process.py считывает данные из Minio, обрабатывает их согласно требованиям задания и отправляет результат обратно в Minio.
Скрипт app.py это консольный пользовательский интерфейс.

Папки data и etl примонтированны к контейнеру поэтому можно меенять скрипты и датасеты без перезапуска.
Для запуска приложения нужно перейти в директорию app и вызвать команду
docker compose up
после завершения запуска всех контейнеров нужно запустить скрипт app.py следующей командой
docker exec -it etl-python python etl/app.py
